<?xml version="1.1" encoding="UTF-8"?>
<!-- salt:09816cfc-2cfc-4d80-84c8-01e141e93e2a -->
<metadata name="ps_CacheKey" path="/shared/Publish/ps_CacheKey" type="PROCEDURE" subtype="SQL_SCRIPT_PROCEDURE" changeToken="0">
  <parameters>
    <parameter name="CacheItem" direction="IN" nullable="true">
      <datatype name="CHAR" type="STRING" minLength="255" maxLength="255"/>
    </parameter>
    <parameter name="Status" direction="OUT" nullable="true">
      <datatype name="CHAR" type="STRING" minLength="255" maxLength="255"/>
    </parameter>
  </parameters>
  <security>
    <owner user="q445qzb" domain="tntadtest"/>
    <privilege user="anonymous" domain="composite" privileges="READ"/>
    <privilege group="all" domain="composite" privileges="READ WRITE EXECUTE"/>
    <privilege group="all" domain="dynamic" privileges="READ WRITE"/>
    <privilege group="SG-Spotfire-Users-WW" domain="tntadtest" privileges="READ WRITE EXECUTE GRANT"/>
    <privilege group="apr_ww" domain="composite" privileges="READ WRITE EXECUTE"/>
    <privilege group="corp.headofficedsql" domain="composite" privileges="READ WRITE EXECUTE"/>
  </security>
  <dependency target="/shared/Source/Cache/CACHE_DB/TDV_CACHE/TDVDBA/cache_status" type="TABLE">
    <datatype type="TABLE" refId="1">
      <element name="clusterid">
        <datatype type="STRING" maxLength="40"/>
      </element>
      <element name="serverid" nullable="false">
        <datatype type="STRING" maxLength="80"/>
      </element>
      <element name="resourceid" nullable="false">
        <datatype type="STRING" maxLength="255"/>
      </element>
      <element name="parameters">
        <datatype type="STRING" maxLength="255"/>
      </element>
      <element name="status" nullable="false">
        <datatype type="STRING" minLength="1" maxLength="1"/>
      </element>
      <element name="cachekey" nullable="false">
        <datatype type="INTEGER" minValue="-2147483648" maxValue="2147483647"/>
      </element>
      <element name="starttime" nullable="false">
        <datatype type="DATETIME"/>
      </element>
      <element name="finishtime">
        <datatype type="DATETIME"/>
      </element>
      <element name="cleartime">
        <datatype type="DATETIME"/>
      </element>
      <element name="bytes">
        <datatype type="INTEGER"/>
      </element>
      <element name="message">
        <datatype type="STRING" maxLength="255"/>
      </element>
      <element name="bucket">
        <datatype type="STRING" maxLength="255"/>
      </element>
      <element name="incrementalstatus">
        <datatype type="STRING" minLength="1" maxLength="1"/>
      </element>
      <element name="incrementalmaintenancelevel">
        <datatype type="STRING" maxLength="255"/>
      </element>
    </datatype>
  </dependency>
  <attribute name="Script" type="STRING">PROCEDURE ps_CacheKey(
					IN CacheItem CHAR,
					OUT Status CHAR

)
BEGIN		   

DECLARE Cache INTEGER;
    
SELECT trim(STATUS),CACHEKEY INTO Status,Cache FROM (
SELECT STATUS,CACHEKEY,ROW_NUMBER() OVER (PARTITION BY CacheItem ORDER BY starttime DESC) AS ROW_NR 
FROM   /shared/Source/Cache/CACHE_DB/TDV_CACHE/TDVDBA/cache_status
where resourceid = CacheItem)ISUB  WHERE ROW_NR=1 ;    


END</attribute>
  <attribute name="creationDate" type="LONG">1562591461702</attribute>
  <attribute name="creatorUserDomain" type="STRING">tntadtest</attribute>
  <attribute name="creatorUserId" type="INTEGER">170135</attribute>
  <attribute name="creatorUserName" type="STRING">q445qzb</attribute>
  <attribute name="explicitly.designed" type="BOOLEAN">false</attribute>
  <attribute name="lastModifiedDate" type="LONG">1562667043169</attribute>
  <attribute name="lastModifiedUserDomain" type="STRING">tntadtest</attribute>
  <attribute name="lastModifiedUserId" type="INTEGER">170135</attribute>
  <attribute name="lastModifiedUserName" type="STRING">q445qzb</attribute>
  <attribute name="model" type="NULL"/>
  <attribute name="native_only" type="STRING">false</attribute>
  <attribute name="references" type="NULL"/>
  <attribute name="resourceModifiedDateOnSourceCISSite" type="LONG">1562591461702</attribute>
</metadata>